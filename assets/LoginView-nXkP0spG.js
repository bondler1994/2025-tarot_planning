import{b as p,Q as u}from"./QBtn-BzKmpOb8.js";import{Q as V,I as c}from"./InputBox-D6fhlJ1W.js";import{Q,a as B}from"./QCard-CWjqWXv8.js";import{Q as S}from"./QInput-BRdHTmQs.js";import{B as R,A as a,z as o,y as l,E as g,r as m,x as k,U as I,D as L,F as C}from"./index-D_uQiqUE.js";import{t as f}from"./tarotDiaryAPI-BLKX_40E.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-H87n5xvM.js";import"./use-timeout-wdgeJOu5.js";import"./index-DW_MHI2K.js";const D={__name:"BtnGoogleLogin",setup(v){async function i(){try{const t=await f.GET("/api/oauth/google/redirect");console.log(t)}catch(t){console.log(t)}}return(t,n)=>(g(),R(u,{class:"btn",color:"grey-7","no-caps":"",unelevated:"",onClick:i},{default:a(()=>[o(p,{class:"btn__icon",left:"",size:"24px",name:"fa-brands fa-google"}),n[0]||(n[0]=l("div",{class:"btn__text"},"以google帳號建立新會員",-1))]),_:1}))}},G=_(D,[["__scopeId","data-v-3e3f937e"]]),U={class:"login"},z={class:"button-group row justify-center"},E={class:"login__forget-btn"},N={class:"login__google-btn"},P={__name:"LoginView",setup(v){const i=L(),t=m({email:"",password:""}),n=m(!1);function b(){n.value=!0}function w(s){return s&&s.length>0?!0:"必填"}function x(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?!0:"email 格式不正確"}async function y(){console.log(t.value);const s=t.value;try{const e=await f.POST("/api/auth/login",s);console.log(e),i.push({name:"today-draw"})}catch(e){console.log(e),b()}}return(s,e)=>{const d=I("RouterLink");return g(),k("div",U,[o(V,{class:"login__form",onSubmit:y},{default:a(()=>[o(c,{title:"帳號",needSignSpace:!1,modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.email=r),rules:[x]},null,8,["modelValue","rules"]),o(c,{title:"密碼",needSignSpace:!1,modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.password=r),rules:[w],type:"password"},null,8,["modelValue","rules"]),l("div",z,[o(d,{to:{name:"register"}},{default:a(()=>[o(u,{class:"button",label:"建立會員",color:"grey-7",unelevated:""})]),_:1}),o(u,{class:"button",label:"登入",type:"submit",color:"grey-7",unelevated:""})])]),_:1}),l("div",E,[o(d,{class:"forget-btn",to:{name:"forgetPassword"}},{default:a(()=>e[3]||(e[3]=[C("忘記密碼")])),_:1})]),e[5]||(e[5]=l("div",{class:"login__seperator"},[l("div",{class:"seperator"})],-1)),l("div",N,[o(G)]),o(S,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value=r),position:"top"},{default:a(()=>[o(Q,{style:{width:"350px"}},{default:a(()=>[o(B,{class:"row items-center no-wrap"},{default:a(()=>[o(p,{class:"q-pr-xs",name:"error",size:"sm",color:"negative"}),e[4]||(e[4]=l("div",{class:"text-weight-bold"},"連線失敗",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},K=_(P,[["__scopeId","data-v-dd8e80d3"]]);export{K as default};
