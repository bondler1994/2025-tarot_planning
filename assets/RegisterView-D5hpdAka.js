import{c as A,J as D,K as L,a as k,h as j,b as z,_ as F,r,q as x,v as s,t as o,x as t,G as N,z as O,A as y,L as n,E as Q,M as b,C as p,N as E,H as R,I as _,F as M,O as $}from"./index-CSCzfQmP.js";import{e as G,p as H,a as J,r as w,I as K,Q as T,b as W,c as X,d as Y}from"./InputBoxRadio-6olGMi6E.js";import{Q as S}from"./QInput-C29NEW-e.js";import{Q as Z,I as i}from"./InputBox-CDQMk2Iv.js";import{C as U}from"./ClosePopup-C4A8Sqpv.js";import{u as ee}from"./profileStore-CaRdUoLh.js";import{t as le}from"./tarotDiaryAPI-BLKX_40E.js";import"./index-DW_MHI2K.js";const oe=A({name:"QCardActions",props:{...D,vertical:Boolean},setup(v,{slots:c}){const f=L(v),a=k(()=>`q-card__actions ${f.value} q-card__actions--${v.vertical===!0?"vert column":"horiz row"}`);return()=>j("div",{class:a.value},z(c.default))}}),ae={class:"register column content-center"},te={class:"register__form"},se={class:"row items-center justify-end"},ne={class:"consent-validation"},re={class:"option"},ue={class:"button-group row justify-center"},ie={__name:"RegisterView",setup(v){const c=N(),f=ee(),a=r({name:"",email:"",password:"",gender:"",birthdate:""}),C=r(""),d=r(!1),h=r([{label:"男",value:"male"},{label:"女",value:"female"},{label:"其他",value:"other"}]),m=k({get(){return a.value.birthdate.split("-").join("/")},set(u){a.value.birthdate=u.split("/").join("-")}}),V=r(!1),g=r(!1);function I(){V.value=!0}function P(){g.value=!0}async function q(){console.log(a.value);const u=a.value;try{const e=await le.POST("/api/auth/register",u);console.log(e),f.updateProfile(u),c.push({name:"registerConfirmation"})}catch(e){console.log(e),P()}}return(u,e)=>{const B=O("RouterLink");return y(),x("div",ae,[s("div",te,[o(Z,{class:"form",onSubmit:q},{default:t(()=>[o(i,{title:"帳號",hint:"帳號即為您的 email",hasSign:!0,modelValue:a.value.email,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.email=l),rules:[n(G)],refString:"email"},null,8,["modelValue","rules"]),o(i,{title:"密碼",hint:"8~16 位，須包含英文大小寫及數字",type:"password",hasSign:!0,modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.password=l),rules:[n(H)]},null,8,["modelValue","rules"]),o(i,{type:"password",hasSign:!0,modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=l=>C.value=l),rules:[l=>n(J)(l,a.value.password)]},null,8,["modelValue","rules"]),o(i,{title:"暱稱",modelValue:a.value.name,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.name=l),rules:[n(w)]},null,8,["modelValue","rules"]),o(K,{title:"性別",modelValue:a.value.gender,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.gender=l),rules:[n(w)],options:h.value},null,8,["modelValue","rules","options"]),o(i,{title:"生日",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value=l),rules:[n(w)]},{default:t(()=>[o(Q,{name:"event",class:"cursor-pointer",size:"20px"},{default:t(()=>[o(T,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[o(W,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value=l)},{default:t(()=>[s("div",se,[b(o(p,{label:"確定",color:"primary",flat:""},null,512),[[U]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"]),s("div",ne,[o(X,{class:"consent-field",borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value=l),rules:[n(Y)],"no-error-icon":""},{control:t(()=>[s("div",re,[b(s("input",{class:"option__input",type:"checkbox",id:"consent","onUpdate:modelValue":e[7]||(e[7]=l=>d.value=l)},null,512),[[E,d.value]]),s("div",{class:"option__label",onClick:I},"我同意個人資料使用說明"),o(S,{modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=l=>V.value=l)},{default:t(()=>[o(R,null,{default:t(()=>[o(_,null,{default:t(()=>e[11]||(e[11]=[s("div",{class:"text-h6"},"個人資料使用說明",-1)])),_:1}),o(_,{class:"q-pt-none"},{default:t(()=>[(y(),x(M,null,$(15,l=>s("p",{key:l}," Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore. ")),64))]),_:1}),o(oe,{align:"right"},{default:t(()=>[b(o(p,{flat:"",label:"關閉",color:"primary"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","rules"])]),s("div",ue,[o(B,{to:{name:"login"}},{default:t(()=>[o(p,{class:"button",label:"取消",color:"grey-2",unelevated:""})]),_:1}),o(p,{class:"button",label:"建立會員",type:"submit",color:"grey-7",unelevated:""})])]),_:1})]),o(S,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=l=>g.value=l),position:"top"},{default:t(()=>[o(R,{style:{width:"350px"}},{default:t(()=>[o(_,{class:"row items-center no-wrap"},{default:t(()=>[o(Q,{class:"q-pr-xs",name:"error",size:"sm",color:"negative"}),e[12]||(e[12]=s("div",{class:"text-weight-bold"},"連線失敗",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},be=F(ie,[["__scopeId","data-v-32182d36"]]);export{be as default};
