import{Q as h}from"./QBtn-xStpeZDa.js";import{h as f}from"./html2canvas.esm-DyqYn1B1.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as d,k as y,x as g,y as o,Z as b,G as _,z as k,E as u,v as w}from"./index-D7fSiNVo.js";const E={class:"container"},S={class:"container__body easter-egg"},x={class:"easter-egg__header"},B={key:0,class:"easter-egg__body"},D={class:"container__footer"},$={__name:"EasterEggView",setup(C){const c=d(!1),m=async()=>{c.value=!0,await w();const e=document.querySelector(".easter-egg");if(e){const r=await f(e),i=await new Promise(s=>r.toBlob(s,"image/png")),t=new Date,l=new File([i],`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}.png`,{type:"image/png"});if(!/Mobi|Android/i.test(navigator.userAgent)){const s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}_tarot`,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}else navigator.canShare&&navigator.canShare({files:[l]})?(await navigator.share({title:"今日塔羅",text:"來看看我今天抽到了什麼吧！",files:[l]}),console.log("分享成功！")):console.error("不支援分享此類型的內容")}else console.error(".diary__body 元素未找到");c.value=!1},n=d(null),p={status:"success",data:{message:"查詢成功",accumulated_days:15,encouragement_message:"恭喜你累積撰寫了 15 天日記！最近是不是感覺自己變得更加自信呢？繼續保持！"}};return y(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),n.value=p}catch(e){console.error("獲取資料失敗",e),alert("無法載入")}}),(e,r)=>(u(),g("div",E,[o("div",S,[o("div",x,_(),1),n.value?(u(),g("div",B,[o("span",null,_(n.value.data.encouragement_message),1)])):b("",!0)]),o("div",D,[k(h,{class:"shareButton",unelevated:"",label:"分享",rounded:"",onClick:m})])]))}},F=v($,[["__scopeId","data-v-bccb6be3"]]);export{F as default};
