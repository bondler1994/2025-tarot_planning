import{_ as h,r as d,S as v,q as g,v as o,T as f,R as _,t as y,C as b,A as u,U as w}from"./index-CSCzfQmP.js";import{h as k}from"./html2canvas.esm-DyqYn1B1.js";const S={class:"container"},E={class:"container__body easter-egg"},B={class:"easter-egg__header"},C={key:0,class:"easter-egg__body"},D={class:"container__footer"},R={__name:"EasterEggView",setup($){const c=d(!1),m=async()=>{c.value=!0,await w();const e=document.querySelector(".easter-egg");if(e){const r=await k(e),i=await new Promise(s=>r.toBlob(s,"image/png")),t=new Date,l=new File([i],`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}.png`,{type:"image/png"});if(!/Mobi|Android/i.test(navigator.userAgent)){const s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}_tarot`,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}else navigator.canShare&&navigator.canShare({files:[l]})?(await navigator.share({title:"今日塔羅",text:"來看看我今天抽到了什麼吧！",files:[l]}),console.log("分享成功！")):console.error("不支援分享此類型的內容")}else console.error(".diary__body 元素未找到");c.value=!1},n=d(null),p={status:"success",data:{message:"查詢成功",accumulated_days:15,encouragement_message:"恭喜你累積撰寫了 15 天日記！最近是不是感覺自己變得更加自信呢？繼續保持！"}};return v(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),n.value=p}catch(e){console.error("獲取資料失敗",e),alert("無法載入")}}),(e,r)=>(u(),g("div",S,[o("div",E,[o("div",B,_(),1),n.value?(u(),g("div",C,[o("span",null,_(n.value.data.encouragement_message),1)])):f("",!0)]),o("div",D,[y(b,{class:"shareButton",unelevated:"",label:"分享",rounded:"",onClick:m})])]))}},L=h(R,[["__scopeId","data-v-bccb6be3"]]);export{L as default};
