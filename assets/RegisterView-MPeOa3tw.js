import{c as A,d as D,b as y,Q as p}from"./QBtn-BzKmpOb8.js";import{e as j,p as z,a as L,r as b,I as F,Q as E,b as N,c as O,d as $}from"./InputBoxRadio-QxVt9FTv.js";import{Q as x,a as _}from"./QCard-CWjqWXv8.js";import{j as M,f as k,h as T,i as W,r as n,x as Q,y as s,z as o,A as a,D as X,U as G,E as R,C as r,V as w,W as H,S as J,X as K}from"./index-D_uQiqUE.js";import{Q as S}from"./QInput-BRdHTmQs.js";import{Q as Y,I as i}from"./InputBox-D6fhlJ1W.js";import{C as U}from"./ClosePopup-DvH92Jpj.js";import{u as Z}from"./profileStore-De6KmK6x.js";import{t as ee}from"./tarotDiaryAPI-BLKX_40E.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-H87n5xvM.js";import"./use-render-cache-BZbr4VIw.js";import"./use-timeout-wdgeJOu5.js";import"./index-DW_MHI2K.js";const oe=M({name:"QCardActions",props:{...A,vertical:Boolean},setup(v,{slots:c}){const f=D(v),t=k(()=>`q-card__actions ${f.value} q-card__actions--${v.vertical===!0?"vert column":"horiz row"}`);return()=>T("div",{class:t.value},W(c.default))}}),te={class:"register column content-center"},ae={class:"register__form"},se={class:"row items-center justify-end"},re={class:"consent-validation"},ne={class:"option"},ue={class:"button-group row justify-center"},ie={__name:"RegisterView",setup(v){const c=X(),f=Z(),t=n({name:"",email:"",password:"",gender:"",birthdate:""}),C=n(""),d=n(!1),h=n([{label:"男",value:"male"},{label:"女",value:"female"},{label:"其他",value:"other"}]),m=k({get(){return t.value.birthdate.split("-").join("/")},set(u){t.value.birthdate=u.split("/").join("-")}}),V=n(!1),g=n(!1);function P(){V.value=!0}function B(){g.value=!0}async function I(){console.log(t.value);const u=t.value;try{const e=await ee.POST("/api/auth/register",u);console.log(e),f.updateProfile(u),c.push({name:"registerConfirmation"})}catch(e){console.log(e),B()}}return(u,e)=>{const q=G("RouterLink");return R(),Q("div",te,[s("div",ae,[o(Y,{class:"form",onSubmit:I},{default:a(()=>[o(i,{title:"帳號",hint:"帳號即為您的 email",hasSign:!0,modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.email=l),rules:[r(j)],refString:"email"},null,8,["modelValue","rules"]),o(i,{title:"密碼",hint:"8~16 位，須包含英文大小寫及數字",type:"password",hasSign:!0,modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.password=l),rules:[r(z)]},null,8,["modelValue","rules"]),o(i,{type:"password",hasSign:!0,modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=l=>C.value=l),rules:[l=>r(L)(l,t.value.password)]},null,8,["modelValue","rules"]),o(i,{title:"暱稱",modelValue:t.value.name,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.name=l),rules:[r(b)]},null,8,["modelValue","rules"]),o(F,{title:"性別",modelValue:t.value.gender,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.gender=l),rules:[r(b)],options:h.value},null,8,["modelValue","rules","options"]),o(i,{title:"生日",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value=l),rules:[r(b)]},{default:a(()=>[o(y,{name:"event",class:"cursor-pointer",size:"20px"},{default:a(()=>[o(E,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[o(N,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value=l)},{default:a(()=>[s("div",se,[w(o(p,{label:"確定",color:"primary",flat:""},null,512),[[U]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"]),s("div",re,[o(O,{class:"consent-field",borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value=l),rules:[r($)],"no-error-icon":""},{control:a(()=>[s("div",ne,[w(s("input",{class:"option__input",type:"checkbox",id:"consent","onUpdate:modelValue":e[7]||(e[7]=l=>d.value=l)},null,512),[[H,d.value]]),s("div",{class:"option__label",onClick:P},"我同意個人資料使用說明"),o(S,{modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=l=>V.value=l)},{default:a(()=>[o(x,null,{default:a(()=>[o(_,null,{default:a(()=>e[11]||(e[11]=[s("div",{class:"text-h6"},"個人資料使用說明",-1)])),_:1}),o(_,{class:"q-pt-none"},{default:a(()=>[(R(),Q(J,null,K(15,l=>s("p",{key:l}," Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore. ")),64))]),_:1}),o(oe,{align:"right"},{default:a(()=>[w(o(p,{flat:"",label:"關閉",color:"primary"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","rules"])]),s("div",ue,[o(q,{to:{name:"login"}},{default:a(()=>[o(p,{class:"button",label:"取消",color:"grey-2",unelevated:""})]),_:1}),o(p,{class:"button",label:"建立會員",type:"submit",color:"grey-7",unelevated:""})])]),_:1})]),o(S,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=l=>g.value=l),position:"top"},{default:a(()=>[o(x,{style:{width:"350px"}},{default:a(()=>[o(_,{class:"row items-center no-wrap"},{default:a(()=>[o(y,{class:"q-pr-xs",name:"error",size:"sm",color:"negative"}),e[12]||(e[12]=s("div",{class:"text-weight-bold"},"連線失敗",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Qe=le(ie,[["__scopeId","data-v-32182d36"]]);export{Qe as default};
